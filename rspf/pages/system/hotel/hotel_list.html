<% 
	var headContent = {
	include("/pages/template/head.html"){}
%>

<script type="text/javascript">
	var oper;
	jQuery(function($) {
		// 页面方法
		oper = {
			width : 400,
			height : 500,
			form : document.form1,
			list : function() {
				var url = 'system/hotel/list';
				this.form.action = url;
				this.form.submit();
			},
			push : function() {
				var url = 'system/hotel/push';
				$.post(url,function(data,status){
			        alert("Data: " + data + "nStatus: " + status);
			    });
			},
			save : function(){
				var oyhl = $("#euroRate").val();
				var myhl = $("#usdRate").val();
				if(myhl != null && myhl != '' && oyhl != null &&  oyhl != '')
				{
					var url = 'system/hotel/save';
					this.form.action = url;
					this.form.submit();
				}
				else
				{
					alert("汇率不能为空！");
				}
			} 
		};
		//显示Menu索引
		showMenu('page_hotel');
	});
	
	//分页
	var paginator = function(page) {
		oper.list();
	};
</script>

<%
};
var bodyContent = {
%>

	<!-- 菜单 -->
	<% include("/pages/template/menu.html"){} %>

	<form name="form2" action="" method="post" class="form-inline" role="form">
	<div class="form-group" style="margin-top: 20px;margin-bottom: 10px;">
		    <label for="myhl" class="control-label">美元汇率</label>
		    <div class="col-sm-10" style="margin-top: -10px;">
		    	<input name="usdRate" class="form-control" type="text" id="usdRate" 
		    		value="${rate.usdRate}"  placeholder="美元汇率" style="margin-left: 100px;">
		    </div>
		  </div>
		<div class="form-group" style="margin-top: 20px;margin-bottom: 10px;">
		    <label for="oyhl" class="control-label">欧元汇率</label>
		    <div class="col-sm-10" style="margin-top: -10px;">
		      <input name="euroRate" type="text" class="form-control" id="euroRate" 
		      	value="${rate.euroRate}" placeholder="欧元汇率" style="margin-left: 100px;">
		    </div>
	    </div>
	    &nbsp;&nbsp;&nbsp;
	    <a href="javascript:void(0);" class="btn btn-sm btn-success" onclick="oper.save();">保存最新汇率</a> 
	</form>
	
	<form name="form3" action="#" method="post" class="form-inline" role="form" style="margin-top:-70px;margin-right:-20px;float:right;">
	<div class="form-group" style="margin-top: 34px;margin-bottom: 10px;">
		    <label for="tj" class="control-label">酒店抬价(单位：元)</label>
		    <div class="col-sm-10" style="margin-top: -26px;">
		    	<input name="tj" class="form-control" type="text" id="tj" 
		    		value="0.00"  placeholder="酒店抬价" style="margin-left: 100px;">
		    </div>
		  </div>
	</form>
	<form name="form1" action="" method="post"  class="form-inline" role="form">
		<!-- 数据列表 -->
		<table class="table table-striped table-bordered table-hover">
			<thead>
				<tr>
					<%  // 列表头部 %>
					<th name="codigo_hotel">代码</th> 
					<th name="pais" class="sorting">国家</th> 
					<th name="provincia" class="sorting">省份</th> 
					<th name="poblacion" class="sorting">城市</th> 
					<th name="nombre_h" class="sorting">名称</th> 
					<th name="categoria" class="sorting">酒店等级</th>
					<th name="num_habitaciones" class="sorting">客房数量</th> 
					<th width="15%">操作</th>
				</tr>
			</thead>
			<tbody>
			<% for(item in page.list){ %>
				<tr>
				<td>${item.codigo_hotel}</td>
					<td>${item.pais}</td> 
					<td>${item.provincia}</td> 
					<td>${item.poblacion}</td> 
					<td>${item.nombre_h}</td> 
					<td>${item.categoria}</td> 
					<td>${item.num_habitaciones} 间</td>
				<td>
				<a href="javascript:void(0);" class="btn btn-sm btn-primary" onclick="oper.push(${item.id});">推送到携程</a> 
				</td>
				</tr>
			<% } %>
			</tbody>
		</table>
		<%include("/pages/includes/paginator.html"){} %>
	</form>
<%}; %>


<% layout("/pages/template/_layout.html",{head:headContent,body:bodyContent}){ %>
<%} %>
